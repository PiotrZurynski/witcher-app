{% extends "./base.html" %}
{% load static %}
{% block title %}Mój profil{% endblock %}


{% block page_css %}
<link rel="stylesheet" href="{% static 'contracts/css/profile.css' %}">
{% endblock %}

{% block content %}
<div class="profile">
  <div class="userinfo">
    <h2>Profil: <span class="username">{{user.username}}</span></h2>
  </div>
  <div class="profilhead">
    <h1>Moje Kontrakty</h1>
  </div>
  <div class="table">
    <table class="tablecontract">
      <thead>
        <tr>
          <th>Tytuł</th>
          <th>Utworzono</th>
          <th>Akcje</th>
        </tr>
      </thead>
      <tbody>
        {% for c in contracts %}
        <tr>
          <td class="title-col">
            <a href="{% url 'contractdetail' slug=c.slug %}" class="contractlink">
            {% if c.title|length > 30 %}
              {{c.title|slice:":30"}}...
            {% else %}
              {{c.title}}
            {% endif %}
          </a>
          </td>
          <td class="date-col">{{c.time_created|date:"Y-m-d H:i"}}</td>
          <td class="actions-col">
            <a href="{% url 'contractupdate' c.pk %}" class="btn-act btn-edit">Edytuj</a>
            <a href="{% url 'contractdelete' c.pk %}" class="btn-act btn-delete">Usuń</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="3" class="empty">Nie masz jeszcze żadnych kontraktów.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    

  </div>
  <div >
      <a href="{% url 'contractcreate' %}" class="btn-add">+ Dodaj Zlecenie</a>
    </div>
</div>

{% endblock %}