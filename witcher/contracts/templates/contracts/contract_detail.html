{% extends "./base.html" %}
{% load static %}
{% block title %}{{ contract.title }}{% endblock %}
{% block page_css %}
<link rel="stylesheet" href="{% static 'contracts/css/contract_detail.css' %}">
{% endblock %}
{% block content %}
<div class="contractdetail">
    <div class="detail-header">
        <h1>{{ contract.title }}</h1>
        <span class="state-badge state-{{ contract.state }}">{{ contract.get_state_display }}</span>
    </div>
    
    <div class="detail-content">
        <div class="detail-section">
            <h2>Informacje o zleceniu</h2>
            <div class="infogrid">
                <div class="info">
                    <span class="label">Kraina:</span>
                    <span class="value">{{ contract.realm }}</span>
                </div>
                <div class="info">
                    <span class="label">Miejscowość:</span>
                    <span class="value">{{ contract.town }}</span>
                </div>
                <div class="info">
                    <span class="label">Potwór:</span>
                    <span class="value">{{ contract.monster }}</span>
                </div>
                <div class="info">
                    <span class="label">Kategoria:</span>
                    <span class="value">{{ contract.monster.get_category_display }}</span>
                </div>
                <div class="info">
                    <span class="label">Nagroda:</span>
                    <span class="value reward">{{ contract.reward }} {{ contract.get_currency_display }}</span>
                </div>
                <div class="info">
                    <span class="label">Zleceniodawca:</span>
                    <span class="value">{{ contract.owner.username }}</span>
                </div>
                <div class="info">
                    <span class="label">Data utworzenia:</span>
                    <span class="value">{{ contract.time_created|date:"Y-m-d H:i" }}</span>
                </div>
            </div>
        </div>
        
        {% if contract.description %}
        <div class="detailsection">
            <h2>Opis zlecenia</h2>
            <div class="description">
                {{ contract.description|linebreaks }}
            </div>
        </div>
        {% endif %}
        
        {% if contract.monster.description %}
        <div class="detailsection">
            <h2>O potworze</h2>
            <div class="monster-description">
                {{ contract.monster.description|linebreaks }}
            </div>
        </div>
        {% endif %}
    </div>
    
    <div class="detailactions">
        <a href="{% url 'contractlist' %}" class="btn-back">← Powrót do listy</a>
        {% if user == contract.owner %}
            <a href="{% url 'contractupdate' contract.pk %}" class="btn-edit">Edytuj</a>
            <a href="{% url 'contractdelete' contract.pk %}" class="btn-delete">Usuń</a>
        {% endif %}
    </div>
</div>
{% endblock %}